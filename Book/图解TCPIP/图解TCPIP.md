

## 第一章    网络基础知识



### 1.1、分组交换

> 在通信过程中，通信双方以分组为单位、使用存储-转发机制实现数据交互的通信方式，被称为分组交换（PS:packet switching）。

![分组交换](./images/1-1.1-1.png)

### 1.2、传输的方式

* **面向有连接型**

  > 在发送数据之前，需要在收发主机之间连接一条通信线路。

  ![有线连接](./images/1-1.2-1.jpg)

* **面向无连接型**

  > 发送端不需要建立和断开连接，发送端可于任何时候自由发送数据。接收端不知道何时从何地收到数据，因此需要时常确认是否收到数据。

  ![无线连接](./images/1-1.2-2.jpg)

### 1.3、单播，广播，多播，任播

> 网络通讯中根据客户端数量的一种分类

![单播，广播，多播，任播](./images/1-1.3-1.jpg)



### 1.4、地址

> 通信传输中，发送端和接收端可以被视为通信的主体。它们都能以一个所谓 “地址” 的信息加以标识起来。例如电话中号码就相当于 “地址”。

特性：

1. 唯一性
2. 层次性





### 1.5、网络构成的要素

![网络构成要素](./images/1-1.5-1.jpg)

| 设备                       | 作用                                    |
| :------------------------- | :-------------------------------------- |
| 网卡                       | 使计算机连网的设备（Network Interface） |
| 中继器（Repeater）         | 从物理层上延长网络的设备                |
| 网桥（Bridge）/2层交换机   | 从数据链路层延长网路的设备              |
| 路由器（Router）/3层交换机 | 通过网络层转发分组数据的设备            |
| 4 ~ 7 层交换机             | 处理传输层以上各层网络传输的设备        |
| 网关（Gateway）            | 转换协议的设备                          |





## 第二章    TCP/IP基础知识

### 2.1、背景及历史

> 由美国国防部主导，希望在通信传输的过程中，即使某些节点被攻击或破坏，也可以经过迂回路线实现最终通信。

![节点故障](./images/2-2.1-1.jpg)

![迂回](./images/2-2.1-2.jpg)



### 2.2、TCP/IP 的具体含义

> TCP/IP 并不只限于 TCP 与 IP 两种协议。具体来说，IP 或 ICMP、TCP 或 UDP、TELNET 或 FTP、以及 HTTP 等都是属于 TCP/IP协议。

![TCP/IP 协议簇](./images/2-2.2-1.jpg)

### 2.3、TCP/IP 与 OSI 参考模型

**开放式系统互联（OSI）**

> **开放系统互联(Open System Interconnection)**意为开放式系统互联，把[网络通信](https://baike.baidu.com/item/网络通信)的工作分为7层,分别是[物理层](https://baike.baidu.com/item/物理层),[数据链路层](https://baike.baidu.com/item/数据链路层),[网络层](https://baike.baidu.com/item/网络层),[传输层](https://baike.baidu.com/item/传输层),会话层,[表示层](https://baike.baidu.com/item/表示层)和[应用层](https://baike.baidu.com/item/应用层)。

**TCP/IP协议**

> TCP/IP（Transmission Control Protocol/Internet Protocol，传输控制协议/网际协议）是指能够在多个不同网络间实现信息传输的协议簇。TCP/IP协议不仅仅指的是[TCP](https://baike.baidu.com/item/TCP/33012) 和[IP](https://baike.baidu.com/item/IP/224599)两个协议，而是指一个由[FTP](https://baike.baidu.com/item/FTP/13839)、[SMTP](https://baike.baidu.com/item/SMTP/175887)、TCP、[UDP](https://baike.baidu.com/item/UDP/571511)、IP等协议构成的协议簇， 只是因为在TCP/IP协议中TCP协议和IP协议最具代表性，所以被称为TCP/IP协议。

![OSI与TCP/IP 参考模型](./images/2-2.3-1.jpg)

#### 物理层（硬件）

> TCP/IP 的最底层是负责数据传输的硬件。如以太网、无线LAN、PPP等。



#### 网络接口层（数据链路层）

> 网络接口层利用以太网中的数据链路层进行通信，因此属于接口层。类似驱动的概念。



#### 互联网层（网络层）

> 主要作用是实现终端节点之间的通信，是TCP/IP 的心脏，由 IP（Internet Protocol）、 ICMP（Internet Control Message Protocol）、ARP（Address Resolution Protocol）等协议组成。

![网络层](./images/2-2.3-2.jpg)

* **IP**

  IP 是跨网络传送数据包，使整个互联网都能收到数据的协议。IP 协议使数据能够发送到另一端。

  IP还隐含着数据链路层的功能。

  IP不具有重发机制。

* **ICMP**

  IP 数据包在发送途中一旦发生异常导致无法到达对端目标地址时，需要发送端发送一个发生异常的通知。ICMP就是为这一功能定制的。它有时也被用来诊断网络的健康状况。

* **ARP**

  从分组数据包的 IP 地址中解析出物理地址（MAC 地址）的一种协议

#### 传输层

> 传输层主要的功能就是让程序间实现通信。计算机内部，通常运行多个程序，因此以**端口号**与哪个应用通信

![传输层](./images/2-2.3-3.jpg)

* **TCP**
  1. 面向有线连接的传输层协议
  2. 高可靠性，能够正确处理传输过程中的丢包，乱序等异常情况
  3. 网络开销大，建立与断开连接有时至少需要 7 次以上的收发包
* **UDP**
  1. 面向无连接的传输层协议
  2. 实时性较好，网络开销小
  3. 可靠性差，不对数据报进行检查与修改，所以会出现分组丢失、重复、乱序，应用程序需要负责传输可靠性方面的所有工作



#### 应用层（会话层以上的分层）

* **HTTP**

  http 是一个简单请求-响应协议，它通常运行在 TCP 之上。

* **MIME**

  用于电子邮件

* **FTP**

  文件传输

* **TELNET 与 SSH**

  远程登陆

* **SNMP**

  网络管理



### 2.4、分层模型与通信实例

> 每个分层都会对发送的数据附加一个首部，首部中包含了该层必要的信息，如发送的目标地址以及协议相关信息

![](./images/2-2.4-1.jpg)

![模拟](./images/2-2.4-2.jpg)

* **经过数据链路的包**

![](./images/2-2.4-3.jpg)

### 2.5、数据的单位

![](./images/2-2.5-1.jpg)





## 第三章    数据链路

### 3.1、相关技术

* **网络拓扑**

  网络的连接和构成形状称为网络拓扑（Topology）。主要包括总线型、环形、星型、网状型等。

  ![mac地址](./images/3-3.1-1.jpg)

* **MAC 地址**

  MAC 地址用于识别数据链路中互连的节点，长度48比特。

  ![mac地址](./images/3-3.1-2.jpg)

* **共享介质型网络**

  共享介质型网络指由多个设备共享一个通信介质的一种网络。其中又分两种控制方式：

  1. **争用**，是指争夺数据传输的权力，也叫 CSMA（载波监听多路访问）。
  2. **令牌传递**，是沿着令牌环路发送一种叫做 “令牌” 的特殊保温，是控制传输的一种。

* **非共享介质网络**

  非共享介质网络是指不共享介质，网络中每个站直连交换机，即星型拓扑

* **半双工通信与全双工通信**

  半双工是指只发送或指接收的通信方式。他类似无线电收发器，若两端同事说话，是听不清对方的话的。而全双工通信可以在同一时间收发数据。

* **根据 MAC 地址转发**

  以太网交换机接到包时，从源 MAC 地址作以及曾经接收该地址发送数据包的接口作为对应关系生成**转发表（Forwarding Table）**，根据此表发送数据到对应网络接口。

* **交换机转发方式**

  1. 存储转发，是检查以太网数据帧末尾的 FCS 位后再进行转发。可以避免因冲突而被破坏的帧或噪音导致的错误帧
  2. 直通转发

* **环路检测技术**

  所有环路的形成都是由于目的路径不明确导致混乱而造成的，具体有以下两种解决方式：

  1. 生成树方式
  2. 源路由法

* **VLAN**

  虚拟局域网（VLAN）是一组逻辑上的设备和用户，这些设备和用户并不受物理位置的限制，可以根据功能、部门及应用等因素将它们组织起来，相互之间的通信就好像它们在[同一个网段](https://baike.baidu.com/item/同一个网段/10612240)中一样，由此得名虚拟局域网。



### 3.2、以太网







## 第四章    IP 协议

### 4.1、IP 基础知识

> IP 大致分为三大作用模块，IP 寻址、路由、IP 分包与组包。

* IP 地址属于网络层地址  



### 4.2、全局地址与私有地址

> 全局地址就是公网ip，其它均为私有地址。配合上 NAT（Network Address Translation，网络地址转换）技术解决 IP 地址不足问题

![](./images/4-4.2-1.jpg)

